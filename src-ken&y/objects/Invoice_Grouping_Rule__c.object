<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>Accept</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <allowInChatterGroups>false</allowInChatterGroups>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <deploymentStatus>Deployed</deploymentStatus>
    <enableActivities>false</enableActivities>
    <enableBulkApi>true</enableBulkApi>
    <enableFeeds>false</enableFeeds>
    <enableHistory>false</enableHistory>
    <enableReports>false</enableReports>
    <enableSearch>true</enableSearch>
    <enableSharing>true</enableSharing>
    <enableStreamingApi>true</enableStreamingApi>
    <fieldSets>
        <fullName>Additional_FieldSet</fullName>
        <availableFields>
            <field>Company__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <description>New Rule Page</description>
        <label>Additional FieldSet</label>
    </fieldSets>
    <fieldSets>
        <fullName>Grouping_FieldSet</fullName>
        <description>New Rule page</description>
        <displayedFields>
            <field>Group_By_Customer_Hierarchy__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>For_Customer__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Group_By_Agreements__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>For_Agreement__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Group_By_Sales_Orders__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Group_By_Sales_Order_If__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Group_By_Shipments__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Group_By_Category__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>For_Category__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Group_By_Product__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>For_Product__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <label>Grouping FieldSet</label>
    </fieldSets>
    <fieldSets>
        <fullName>Header_FieldSet</fullName>
        <description>New Rule Page</description>
        <displayedFields>
            <field>Company__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Start_Date__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>true</isRequired>
        </displayedFields>
        <displayedFields>
            <field>End_Date__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Billing_UOM__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Recurrence_Start_Date__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Use_Billing_Frequency_on_Fulfillment__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <label>Header FieldSet</label>
    </fieldSets>
    <fieldSets>
        <fullName>Invoice_Grouping_Rule_fieldSet</fullName>
        <availableFields>
            <field>CreatedById</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>CreatedDate</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Group_By_Agreements__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Group_By_Customer_Hierarchy__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Group_By_Sales_Order_If__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Group_By_Sales_Order_Types__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Group_By_Sales_Orders__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Group_By_Shipments__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Id</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>IsDeleted</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Is_Valid__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>LastModifiedById</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>LastModifiedDate</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>OwnerId</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Rank_Key__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <description>This is used on Invoice Grouping rule Visualforce page.</description>
        <displayedFields>
            <field>Rank__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Name</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Rule_Description__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Start_Date__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>true</isRequired>
        </displayedFields>
        <displayedFields>
            <field>End_Date__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Company__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Is_Active__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <label>Invoice Grouping Rule FieldSet</label>
    </fieldSets>
    <fieldSets>
        <fullName>OndemandInvoiceGenerate</fullName>
        <description>OndemandInvoiceGenerate page</description>
        <displayedFields>
            <field>Group_By_Customer_Hierarchy__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Group_By_Agreements__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Group_By_Sales_Orders__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Group_By_Sales_Order_If__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Group_By_Shipments__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Group_By_Category__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Group_By_Product__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <label>OndemandInvoiceGenerate</label>
    </fieldSets>
    <fields>
        <fullName>Billing_UOM__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Billing UOM</label>
        <lookupFilter>
            <active>true</active>
            <filterItems>
                <field>UOM__c.Type__c</field>
                <operation>equals</operation>
                <value>Time</value>
            </filterItems>
            <isOptional>false</isOptional>
        </lookupFilter>
        <referenceTo>UOM__c</referenceTo>
        <relationshipLabel>Invoice Grouping Rules</relationshipLabel>
        <relationshipName>Invoice_Grouping_Rules</relationshipName>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Company__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Company</label>
        <referenceTo>Company__c</referenceTo>
        <relationshipLabel>Invoice Grouping Rules</relationshipLabel>
        <relationshipName>Invoice_Grouping_Rules</relationshipName>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>End_Date__c</fullName>
        <externalId>false</externalId>
        <inlineHelpText>It is an open ended date. If left empty it implies this rule is always active.</inlineHelpText>
        <label>End Date</label>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>DateTime</type>
    </fields>
    <fields>
        <fullName>ExtId__c</fullName>
        <caseSensitive>true</caseSensitive>
        <externalId>true</externalId>
        <label>External Id</label>
        <length>255</length>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>true</unique>
    </fields>
    <fields>
        <fullName>For_Agreement__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <inlineHelpText>Use checkbox to group invoices by Agreement OR use field For Agreement</inlineHelpText>
        <label>For Agreement</label>
        <lookupFilter>
            <active>true</active>
            <booleanFilter>1 AND (2 OR 3)</booleanFilter>
            <errorMessage>Agreement must be approved and have the same company as the grouping rule.</errorMessage>
            <filterItems>
                <field>Agreement__c.Status__c</field>
                <operation>equals</operation>
                <value>Approved</value>
            </filterItems>
            <filterItems>
                <field>Agreement__c.Customer__r.Company__c</field>
                <operation>equals</operation>
                <valueField>$Source.Company__c</valueField>
            </filterItems>
            <filterItems>
                <field>Agreement__c.Customer__r.Company__c</field>
                <operation>equals</operation>
                <value></value>
            </filterItems>
            <isOptional>false</isOptional>
        </lookupFilter>
        <referenceTo>Agreement__c</referenceTo>
        <relationshipLabel>Invoice Grouping Rules</relationshipLabel>
        <relationshipName>Invoice_Grouping_Rules</relationshipName>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>For_Agreements__c</fullName>
        <externalId>false</externalId>
        <label>For Agreements</label>
        <length>32768</length>
        <trackTrending>false</trackTrending>
        <type>LongTextArea</type>
        <visibleLines>3</visibleLines>
    </fields>
    <fields>
        <fullName>For_Categories__c</fullName>
        <externalId>false</externalId>
        <label>For Categories</label>
        <length>32768</length>
        <trackTrending>false</trackTrending>
        <type>LongTextArea</type>
        <visibleLines>3</visibleLines>
    </fields>
    <fields>
        <fullName>For_Category__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <inlineHelpText>Group by Category OR for specific Category OR by Product OR for specific Product</inlineHelpText>
        <label>For Category</label>
        <lookupFilter>
            <active>true</active>
            <errorMessage>Category must have the same company as that on grouping rule</errorMessage>
            <filterItems>
                <field>$Source.Company__c</field>
                <operation>equals</operation>
                <valueField>$Source.Company__c</valueField>
            </filterItems>
            <isOptional>false</isOptional>
        </lookupFilter>
        <referenceTo>Category__c</referenceTo>
        <relationshipLabel>Invoice Grouping Rules (For Category)</relationshipLabel>
        <relationshipName>Invoice_Grouping_Rules1</relationshipName>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>For_Customer__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <inlineHelpText>Select a customer hierarchy level OR use this field to enter a specific customer. You can combine multiple selections in a rule but you must specify criteria for the customer level at least.</inlineHelpText>
        <label>For Customer</label>
        <lookupFilter>
            <active>true</active>
            <booleanFilter>1 AND (2 OR 3)</booleanFilter>
            <errorMessage>Customer must be approved and must belong to the same company on the Grouping Rule</errorMessage>
            <filterItems>
                <field>Customer__c.Status__c</field>
                <operation>equals</operation>
                <value>Approved</value>
            </filterItems>
            <filterItems>
                <field>Customer__c.Company__c</field>
                <operation>equals</operation>
                <valueField>$Source.Company__c</valueField>
            </filterItems>
            <filterItems>
                <field>Customer__c.Company__c</field>
                <operation>equals</operation>
                <value></value>
            </filterItems>
            <isOptional>false</isOptional>
        </lookupFilter>
        <referenceTo>Customer__c</referenceTo>
        <relationshipLabel>Invoice Grouping Rules</relationshipLabel>
        <relationshipName>Invoice_Grouping_Rules</relationshipName>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>For_Customers__c</fullName>
        <externalId>false</externalId>
        <label>For Customers</label>
        <length>32768</length>
        <trackTrending>false</trackTrending>
        <type>LongTextArea</type>
        <visibleLines>3</visibleLines>
    </fields>
    <fields>
        <fullName>For_Product__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <inlineHelpText>Group by Category OR for specific Category OR by Product OR for specific Product</inlineHelpText>
        <label>For Product</label>
        <lookupFilter>
            <active>true</active>
            <booleanFilter>1 OR 2</booleanFilter>
            <filterItems>
                <field>Product__c.Company__c</field>
                <operation>equals</operation>
                <valueField>$Source.Company__c</valueField>
            </filterItems>
            <filterItems>
                <field>Product__c.Company__c</field>
                <operation>equals</operation>
                <value></value>
            </filterItems>
            <isOptional>false</isOptional>
        </lookupFilter>
        <referenceTo>Product__c</referenceTo>
        <relationshipLabel>Invoice Grouping Rules</relationshipLabel>
        <relationshipName>Invoice_Grouping_Rules</relationshipName>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>For_Products__c</fullName>
        <externalId>false</externalId>
        <label>For Products</label>
        <length>32768</length>
        <trackTrending>false</trackTrending>
        <type>LongTextArea</type>
        <visibleLines>3</visibleLines>
    </fields>
    <fields>
        <fullName>Group_By_Agreements__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <inlineHelpText>Use checkbox to group invoices by Agreement OR use field For Agreement</inlineHelpText>
        <label>Group By Agreements</label>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Group_By_Category__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <inlineHelpText>Group by Category OR for specific Category OR by Product OR for specific Product</inlineHelpText>
        <label>Group By Categories</label>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Group_By_Customer_Hierarchy__c</fullName>
        <externalId>false</externalId>
        <inlineHelpText>Use checkbox to select a customer hierarchy level OR use field to enter a specific customer. You can combine multiple selections in a rule but you must specify criteria for the customer level at least.</inlineHelpText>
        <label>Group By Customer Hierarchy</label>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Corporate Parent</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Bill To</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Sold To</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Ship To</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Site</fullName>
                    <default>false</default>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Group_By_Product__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <inlineHelpText>Group by Category OR for specific Category OR by Product OR for specific Product</inlineHelpText>
        <label>Group By Products</label>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Group_By_Sales_Order_If__c</fullName>
        <externalId>false</externalId>
        <inlineHelpText>Use only if Group by Sales Orders or Group by Sales Order Types is selected. Invoice only when entire sales order is closed, sales order line is closed, or leave blank to invoice whenever fulfillment records are generated.</inlineHelpText>
        <label>Group By Sales Order If</label>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Order is closed</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Order line is closed</fullName>
                    <default>false</default>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Group_By_Sales_Order_Types__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>Group By Sales Order Types</label>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Group_By_Sales_Orders__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <inlineHelpText>Group by Sales Orders OR by Sales Order Types OR by Shipments</inlineHelpText>
        <label>Group By Sales Orders</label>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Group_By_Shipments__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <inlineHelpText>Group by Sales Orders OR by Sales Order Types OR by Shipments</inlineHelpText>
        <label>Group By Shipments</label>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Is_Active__c</fullName>
        <externalId>false</externalId>
        <formula>and(Start_Date__c &lt;= now()  ,  or( ISBLANK(End_Date__c) ,(End_Date__c &gt;now())))</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Is Active</label>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Is_Valid__c</fullName>
        <externalId>false</externalId>
        <formula>OR(NOT(ISBLANK(For_Agreement__c )),
NOT(ISBLANK( For_Category__c )), 
NOT(ISBLANK( For_Customer__c )), 
NOT(ISBLANK( For_Product__c )), 
Group_By_Agreements__c, 
NOT(ISBLANK( TEXT(Group_By_Customer_Hierarchy__c) )), 
Group_By_Sales_Orders__c, 
Group_By_Sales_Order_Types__c, 
Group_By_Shipments__c)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <inlineHelpText>Checked if at least one grouping criteria is selected.</inlineHelpText>
        <label>Is Valid</label>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Rank_Key__c</fullName>
        <caseSensitive>false</caseSensitive>
        <externalId>false</externalId>
        <inlineHelpText>This stores a key of Company and rank to ensure uniqueness.</inlineHelpText>
        <label>Rank Key</label>
        <length>255</length>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>true</unique>
    </fields>
    <fields>
        <fullName>Rank__c</fullName>
        <externalId>false</externalId>
        <inlineHelpText>Rank determines the order in which rules will be matched against fulfillments.</inlineHelpText>
        <label>Rank</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Recurrence_Start_Date__c</fullName>
        <externalId>false</externalId>
        <label>Recurrence Start Date</label>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>DateTime</type>
    </fields>
    <fields>
        <fullName>Rule_Description__c</fullName>
        <description>Rule description in text format</description>
        <externalId>false</externalId>
        <label>Rule Description</label>
        <length>32768</length>
        <trackTrending>false</trackTrending>
        <type>LongTextArea</type>
        <visibleLines>3</visibleLines>
    </fields>
    <fields>
        <fullName>Start_Date__c</fullName>
        <externalId>false</externalId>
        <inlineHelpText>The date from which the rule is active</inlineHelpText>
        <label>Start Date</label>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>DateTime</type>
    </fields>
    <fields>
        <fullName>Use_Billing_Frequency_on_Fulfillment__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>Use Billing Frequency on Fulfillment</label>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <label>Invoice Grouping Rule</label>
    <listViews>
        <fullName>All</fullName>
        <columns>NAME</columns>
        <columns>Company__c</columns>
        <columns>Is_Valid__c</columns>
        <columns>Start_Date__c</columns>
        <columns>Rank__c</columns>
        <filterScope>Everything</filterScope>
        <label>All</label>
    </listViews>
    <nameField>
        <displayFormat>IGR-{0000000000}</displayFormat>
        <label>Invoice Grouping Rule</label>
        <type>AutoNumber</type>
    </nameField>
    <pluralLabel>Invoice Grouping Rules</pluralLabel>
    <searchLayouts/>
    <sharingModel>ReadWrite</sharingModel>
    <startsWith>Vowel</startsWith>
    <validationRules>
        <fullName>Billing_by_time_intervals</fullName>
        <active>true</active>
        <errorConditionFormula>( ISBLANK(Billing_UOM__c) &amp;&amp; NOT( ISBLANK(Recurrence_Start_Date__c) ) ) ||
( ISBLANK(Recurrence_Start_Date__c) &amp;&amp; NOT( ISBLANK(Billing_UOM__c) ) )</errorConditionFormula>
        <errorMessage>To establish a time based billing cycle please specify both billing uom and recurrence start date. To establish an immediate billing cycle please leave both fields empty.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Cannot_Check_Both_Sales_Orders_Grouping</fullName>
        <active>true</active>
        <errorConditionFormula>AND(AND(Group_By_Sales_Order_Types__c , NOT(ISPICKVAL(Group_By_Sales_Order_If__c ,&quot;&quot;))) ,
Group_By_Sales_Orders__c)</errorConditionFormula>
        <errorMessage>Cannot set both sales order groupings.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Cannot_Select_Both_Agreement_Grouping</fullName>
        <active>true</active>
        <errorConditionFormula>AND(  Group_By_Agreements__c ,
    NOT(ISBLANK(  For_Agreements__c  )))</errorConditionFormula>
        <errorMessage>Cannot set both group by agreements and for agreement fields for a given rule</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Cannot_Select_Both_Customer_Grouping</fullName>
        <active>true</active>
        <errorConditionFormula>AND(NOT(ISBLANK(  TEXT(Group_By_Customer_Hierarchy__c))),
    NOT(ISBLANK( For_Customers__c )))</errorConditionFormula>
        <errorMessage>Cannot populate both group by and for customer fields for a given rule</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Cant_set_SO_conditions_if_not_grouped</fullName>
        <active>true</active>
        <errorConditionFormula>AND(Group_By_Sales_Orders__c = false, Group_By_Sales_Order_Types__c = false, not(isblank( Text(Group_By_Sales_Order_If__c))))</errorConditionFormula>
        <errorDisplayField>Group_By_Sales_Order_If__c</errorDisplayField>
        <errorMessage>Cannot set this picklist if neither group by sales order or order types is checked.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Cant_set_bill_on_fulfillments</fullName>
        <active>true</active>
        <errorConditionFormula>Group_By_Agreements__c = false &amp;&amp; (ISNULL(For_Agreements__c)|| ISBLANK(For_Agreements__c)) &amp;&amp; Group_By_Sales_Orders__c = false &amp;&amp;  
Use_Billing_Frequency_on_Fulfillment__c =true</errorConditionFormula>
        <errorMessage>Billing frequency on fulfillments is only supported for grouping by sales orders and agreements</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Cant_set_both_category_and_product</fullName>
        <active>true</active>
        <errorConditionFormula>AND( NOT( ISBLANK( For_Products__c ) ) ,NOT( ISBLANK(  For_Categories__c  ) ))</errorConditionFormula>
        <errorMessage>Cannot set both category and product grouping criteria.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Must_Select_One_Customer_Grouping</fullName>
        <active>true</active>
        <errorConditionFormula>AND(ISBLANK(  TEXT(Group_By_Customer_Hierarchy__c)),ISBLANK( For_Customers__c ))</errorConditionFormula>
        <errorMessage>Must select one customer grouping for a given rule</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Sales_Order_Type_Mandatory</fullName>
        <active>true</active>
        <errorConditionFormula>AND( Group_By_Sales_Orders__c  = FALSE,  Group_By_Shipments__c = FALSE,  Group_By_Sales_Order_Types__c = FALSE)</errorConditionFormula>
        <errorMessage>Must select at least &apos;Group By Sales Order Type&apos;</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Start_Date_is_Required</fullName>
        <active>true</active>
        <description>Start Date is required.</description>
        <errorConditionFormula>ISNULL(Start_Date__c )</errorConditionFormula>
        <errorMessage>Start Date is required.</errorMessage>
    </validationRules>
</CustomObject>
